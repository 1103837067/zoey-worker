<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zoey Worker</title>
  <!-- Wails v3 Runtime -->
  <script type="module" src="/wails/runtime.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            background: 'hsl(0 0% 100%)',
            foreground: 'hsl(222.2 84% 4.9%)',
            card: 'hsl(0 0% 100%)',
            'card-foreground': 'hsl(222.2 84% 4.9%)',
            primary: {
              DEFAULT: 'hsl(222.2 47.4% 11.2%)',
              foreground: 'hsl(210 40% 98%)',
            },
            secondary: {
              DEFAULT: 'hsl(210 40% 96.1%)',
              foreground: 'hsl(222.2 47.4% 11.2%)',
            },
            muted: {
              DEFAULT: 'hsl(210 40% 96.1%)',
              foreground: 'hsl(215.4 16.3% 46.9%)',
            },
            accent: {
              DEFAULT: 'hsl(210 40% 96.1%)',
              foreground: 'hsl(222.2 47.4% 11.2%)',
            },
            destructive: {
              DEFAULT: 'hsl(0 84.2% 60.2%)',
              foreground: 'hsl(210 40% 98%)',
            },
            border: 'hsl(214.3 31.8% 91.4%)',
            input: 'hsl(214.3 31.8% 91.4%)',
            ring: 'hsl(222.2 84% 4.9%)',
            zoey: '#00FFAE',
          },
          borderRadius: {
            lg: '0.5rem',
            md: 'calc(0.5rem - 2px)',
            sm: 'calc(0.5rem - 4px)',
          }
        }
      }
    }
  </script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    }
    .log-info { color: #3b82f6; }
    .log-warn { color: #f59e0b; }
    .log-error { color: #ef4444; }
    .log-debug { color: #6b7280; }
    /* shadcn 风格的输入框聚焦 */
    input:focus, select:focus {
      outline: none;
      border-color: #00FFAE;
      box-shadow: 0 0 0 2px rgba(0, 255, 174, 0.2);
    }
    /* 滚动条 */
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: #9ca3af; }
    /* 动画 */
    @keyframes slide-up {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-slide-up { animation: slide-up 0.2s ease-out; }
  </style>
</head>
<body class="bg-background text-foreground min-h-screen">
  <div id="app" class="flex flex-col h-screen">
    
    <!-- Header -->
    <header class="border-b px-4 py-3 bg-card">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <!-- ZOEY Logo -->
          <div class="w-8 h-8 rounded-md flex items-center justify-center flex-shrink-0" style="background-color: #00FFAE;">
            <svg width="20" height="20" viewBox="0 0 1864 1864" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M231.385 758.89V308H1691C1666.84 346.916 1636.87 393.79 1602.42 448.903C1559.75 517.159 1493.7 624.026 1493.7 624.026C1493.7 624.026 1415.85 746.813 1376.93 807.2C1339.35 867.587 1304.45 923.277 1272.24 974.271C1240.03 1023.92 1214.53 1064.85 1195.74 1097.06C1195.74 1098.4 1195.07 1099.74 1193.72 1101.08C1195.07 1101.08 1195.74 1101.08 1195.74 1101.08H1658.79V1556H173L702.488 762.916C702.488 761.574 702.488 760.903 702.488 760.903C703.83 759.561 704.501 758.89 704.501 758.89C704.501 758.89 703.83 758.89 702.488 758.89H231.385Z" fill="#FFCC00"/>
            </svg>
          </div>
          <div class="flex-shrink-0">
            <h1 class="text-base font-semibold">Zoey Worker</h1>
            <p class="text-xs text-muted-foreground">UI 自动化执行客户端</p>
          </div>
          <!-- 连接信息（连接后显示，在 Logo 右边） -->
          <div id="headerConnectionInfo" class="hidden items-center gap-3 ml-3 pl-3 border-l text-xs">
            <div class="flex items-center gap-1">
              <span id="headerAgentName" class="font-medium text-foreground max-w-[100px] truncate" title="">-</span>
            </div>
            <div class="flex items-center gap-1">
              <code id="headerAgentId" class="font-mono text-muted-foreground bg-muted px-1.5 py-0.5 rounded text-[10px]">-</code>
              <button id="copyAgentIdBtn" class="p-0.5 hover:bg-muted rounded transition-colors" title="复制 Agent ID">
                <i data-lucide="copy" class="w-3 h-3 text-muted-foreground"></i>
              </button>
            </div>
          </div>
        </div>
        <div id="statusIndicator" class="flex items-center gap-2 text-sm text-muted-foreground flex-shrink-0">
          <span class="w-2 h-2 bg-gray-400 rounded-full"></span>
          未连接
        </div>
      </div>
    </header>
    
    <!-- Tab Navigation -->
    <nav class="border-b px-4 bg-card">
      <div class="flex gap-1">
        <button data-tab="connection" class="tab-btn px-4 py-2.5 text-sm font-medium border-b-2 border-primary text-foreground">
          <i data-lucide="plug" class="w-4 h-4 inline mr-1.5"></i>连接
        </button>
        <button data-tab="settings" class="tab-btn px-4 py-2.5 text-sm font-medium border-b-2 border-transparent text-muted-foreground hover:text-foreground">
          <i data-lucide="settings" class="w-4 h-4 inline mr-1.5"></i>设置
        </button>
        <button data-tab="logs" class="tab-btn px-4 py-2.5 text-sm font-medium border-b-2 border-transparent text-muted-foreground hover:text-foreground">
          <i data-lucide="scroll-text" class="w-4 h-4 inline mr-1.5"></i>日志
        </button>
        <button data-tab="debug" class="tab-btn px-4 py-2.5 text-sm font-medium border-b-2 border-transparent text-muted-foreground hover:text-foreground">
          <i data-lucide="bug" class="w-4 h-4 inline mr-1.5"></i>调试
        </button>
      </div>
    </nav>
    
    <!-- Main Content -->
    <main class="flex-1 overflow-auto p-4 bg-muted/30">
      
      <!-- Connection Tab - 直接填充页面 -->
      <div id="tab-connection" class="tab-content h-full">
        <form id="connectForm" class="space-y-4 max-w-md">
          <div>
            <label class="block text-sm font-medium mb-1.5">服务器地址</label>
            <input type="text" id="serverUrl" value="localhost:50051" placeholder="localhost:50051"
              class="w-full px-3 py-2 bg-background border rounded-md text-sm placeholder:text-muted-foreground transition-colors">
          </div>
          
          <div>
            <label class="block text-sm font-medium mb-1.5">Access Key</label>
            <input type="text" id="accessKey" placeholder="输入 Access Key"
              class="w-full px-3 py-2 bg-background border rounded-md text-sm placeholder:text-muted-foreground transition-colors">
          </div>
          
          <div>
            <label class="block text-sm font-medium mb-1.5">Secret Key</label>
            <input type="password" id="secretKey" placeholder="输入 Secret Key"
              class="w-full px-3 py-2 bg-background border rounded-md text-sm placeholder:text-muted-foreground transition-colors">
          </div>
          
          <div id="errorMessage" class="hidden bg-destructive/10 border border-destructive/20 text-destructive px-3 py-2 rounded-md text-sm"></div>
          
          <div class="flex gap-3 pt-2">
            <button type="submit" id="connectBtn"
              class="flex-1 bg-primary hover:bg-primary/90 disabled:opacity-50 text-primary-foreground font-medium py-2.5 px-4 rounded-md transition-colors text-sm">
              连接
            </button>
            <button type="button" id="disconnectBtn"
              class="hidden flex-1 bg-destructive hover:bg-destructive/90 text-destructive-foreground font-medium py-2.5 px-4 rounded-md transition-colors text-sm">
              断开
            </button>
          </div>
        </form>
      </div>
      
      <!-- Settings Tab -->
      <div id="tab-settings" class="tab-content hidden max-w-md mx-auto">
        <div class="space-y-4">
          
          <!-- 系统权限（仅 macOS） -->
          <div id="permissionsSection" class="bg-card rounded-lg border shadow-sm p-6">
            <div class="flex items-center justify-between mb-4">
              <h2 class="text-base font-semibold flex items-center gap-2">
                <i data-lucide="shield" class="w-5 h-5 text-muted-foreground"></i>
                系统权限
              </h2>
              <button id="refreshPermissionsBtn" class="p-2 hover:bg-muted rounded-md transition-colors" title="刷新权限状态">
                <i data-lucide="refresh-cw" class="w-4 h-4 text-muted-foreground"></i>
              </button>
            </div>
            <div class="space-y-4">
              <!-- 辅助功能权限 -->
              <div class="flex items-center justify-between p-3 rounded-lg bg-muted/30">
                <div class="flex items-center gap-3">
                  <div class="w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center">
                    <i data-lucide="mouse-pointer-click" class="w-4 h-4 text-blue-600"></i>
                  </div>
                  <div>
                    <span class="text-sm font-medium">辅助功能</span>
                    <p class="text-xs text-muted-foreground">控制鼠标、键盘和窗口</p>
                  </div>
                </div>
                <div id="accessibilityStatus" class="flex items-center gap-2">
                  <span class="w-2 h-2 bg-gray-400 rounded-full"></span>
                  <span class="text-sm text-muted-foreground">检查中...</span>
                </div>
              </div>
              <button id="openAccessibilityBtn" class="hidden w-full bg-amber-500 hover:bg-amber-600 text-white text-sm font-medium py-2.5 px-4 rounded-md transition-colors flex items-center justify-center gap-2">
                <i data-lucide="external-link" class="w-4 h-4"></i>
                打开辅助功能设置
              </button>
              
              <!-- 屏幕录制权限 -->
              <div class="flex items-center justify-between p-3 rounded-lg bg-muted/30">
                <div class="flex items-center gap-3">
                  <div class="w-8 h-8 rounded-md bg-purple-100 flex items-center justify-center">
                    <i data-lucide="monitor" class="w-4 h-4 text-purple-600"></i>
                  </div>
                  <div>
                    <span class="text-sm font-medium">屏幕录制</span>
                    <p class="text-xs text-muted-foreground">截图和图像识别匹配</p>
                  </div>
                </div>
                <div id="screenRecordingStatus" class="flex items-center gap-2">
                  <span class="w-2 h-2 bg-gray-400 rounded-full"></span>
                  <span class="text-sm text-muted-foreground">检查中...</span>
                </div>
              </div>
              <button id="openScreenRecordingBtn" class="hidden w-full bg-amber-500 hover:bg-amber-600 text-white text-sm font-medium py-2.5 px-4 rounded-md transition-colors flex items-center justify-center gap-2">
                <i data-lucide="external-link" class="w-4 h-4"></i>
                打开屏幕录制设置
              </button>
              
              <!-- 权限提示 -->
              <div id="permissionWarning" class="hidden mt-3 bg-amber-50 border border-amber-200 text-amber-800 px-4 py-3 rounded-md text-sm">
                <div class="flex items-start gap-2">
                  <i data-lucide="alert-triangle" class="w-4 h-4 mt-0.5 flex-shrink-0"></i>
                  <div>
                    <p class="font-medium">缺少必要权限</p>
                    <p class="mt-1 text-amber-700">请在系统设置中勾选 "ZoeyWorker"，授权后需要<strong>重启应用</strong>才能生效。</p>
                  </div>
                </div>
              </div>
              
              <!-- 重置权限按钮 -->
              <div class="pt-3 border-t">
                <button id="resetPermissionsBtn" class="w-full bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm font-medium py-2.5 px-4 rounded-md transition-colors flex items-center justify-center gap-2">
                  <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
                  重置权限
                </button>
                <p class="text-xs text-muted-foreground mt-2 text-center">
                  如果授权后仍显示"未授权"，可以尝试重置权限后重新授权
                </p>
              </div>
            </div>
          </div>
          
          <!-- Python 环境 -->
          <div id="pythonSection" class="bg-card rounded-lg border shadow-sm p-6">
            <div class="flex items-center justify-between mb-4">
              <h2 class="text-base font-semibold flex items-center gap-2">
                <i data-lucide="terminal" class="w-5 h-5 text-muted-foreground"></i>
                Python 环境
              </h2>
              <button id="refreshPythonBtn" class="p-2 hover:bg-muted rounded-md transition-colors" title="重新检测">
                <i data-lucide="refresh-cw" class="w-4 h-4 text-muted-foreground"></i>
              </button>
            </div>
            <div class="flex items-center justify-between p-3 rounded-lg bg-muted/30">
              <div class="flex items-center gap-3">
                <div class="w-8 h-8 rounded-md bg-yellow-100 flex items-center justify-center">
                  <i data-lucide="code" class="w-4 h-4 text-yellow-600"></i>
                </div>
                <div>
                  <span id="pythonName" class="text-sm font-medium">Python</span>
                  <p id="pythonPath" class="text-xs text-muted-foreground">检测中...</p>
                </div>
              </div>
              <div id="pythonStatus" class="flex items-center gap-2">
                <span class="w-2 h-2 bg-gray-400 rounded-full"></span>
                <span class="text-sm text-muted-foreground">检测中...</span>
              </div>
            </div>
            <div id="pythonNotFound" class="hidden mt-3 bg-amber-50 border border-amber-200 text-amber-800 px-4 py-3 rounded-md text-sm">
              <div class="flex items-start gap-2">
                <i data-lucide="alert-triangle" class="w-4 h-4 mt-0.5 flex-shrink-0"></i>
                <div>
                  <p class="font-medium">未检测到 Python 3</p>
                  <p class="mt-1 text-amber-700">部分功能（脚本执行、UI 自动化）需要 Python 3 环境。请安装后点击刷新按钮重新检测。</p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- OCR 模块状态 -->
          <div id="ocrSection" class="bg-card rounded-lg border shadow-sm p-6">
            <div class="flex items-center justify-between mb-4">
              <h2 class="text-base font-semibold flex items-center gap-2">
                <i data-lucide="scan-text" class="w-5 h-5 text-muted-foreground"></i>
                OCR 文字识别
              </h2>
              <button id="refreshOCRBtn" class="p-2 hover:bg-muted rounded-md transition-colors" title="刷新 OCR 状态">
                <i data-lucide="refresh-cw" class="w-4 h-4 text-muted-foreground"></i>
              </button>
            </div>
            <div class="space-y-4">
              <!-- OCR 状态 -->
              <div class="flex items-center justify-between p-3 rounded-lg bg-muted/30">
                <div class="flex items-center gap-3">
                  <div class="w-8 h-8 rounded-md bg-cyan-100 flex items-center justify-center">
                    <i data-lucide="brain" class="w-4 h-4 text-cyan-600"></i>
                  </div>
                  <div>
                    <span class="text-sm font-medium">OCR 模型</span>
                    <p class="text-xs text-muted-foreground">PP-OCRv4 文字识别模型</p>
                  </div>
                </div>
                <div id="ocrStatus" class="flex items-center gap-2">
                  <span class="w-2 h-2 bg-gray-400 rounded-full"></span>
                  <span class="text-sm text-muted-foreground">检查中...</span>
                </div>
              </div>
              
              <!-- 安装/卸载按钮 -->
              <button id="installOCRBtn" class="hidden w-full bg-primary hover:bg-primary/90 text-primary-foreground text-sm font-medium py-2.5 px-4 rounded-md transition-colors flex items-center justify-center gap-2">
                <i data-lucide="download" class="w-4 h-4"></i>
                安装 OCR 模型
              </button>
              
              <!-- 安装进度 -->
              <div id="ocrInstallProgress" class="hidden">
                <div class="flex items-center justify-between text-sm mb-2">
                  <span class="text-muted-foreground">正在安装...</span>
                  <span id="ocrProgressText" class="font-medium">0%</span>
                </div>
                <div class="w-full bg-muted rounded-full h-2">
                  <div id="ocrProgressBar" class="bg-primary h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
              </div>
              
              <!-- OCR 说明 -->
              <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                <p class="text-sm text-blue-800">
                  <i data-lucide="info" class="w-4 h-4 inline mr-1.5"></i>
                  OCR 模型用于识别屏幕上的文字，支持中英文混合识别。模型大小约 16MB。
                </p>
              </div>
            </div>
          </div>
          
          <!-- 连接设置 -->
          <div class="bg-card rounded-lg border shadow-sm p-6">
            <h2 class="text-base font-semibold mb-4 flex items-center gap-2">
              <i data-lucide="wifi" class="w-5 h-5 text-muted-foreground"></i>
              连接设置
            </h2>
            <div class="space-y-4">
              <label class="flex items-center justify-between cursor-pointer">
                <div>
                  <span class="text-sm font-medium">启动时自动连接</span>
                  <p class="text-xs text-muted-foreground">应用启动后自动连接到服务器</p>
                </div>
                <input type="checkbox" id="settingAutoConnect" class="w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary cursor-pointer">
              </label>
              <label class="flex items-center justify-between cursor-pointer">
                <div>
                  <span class="text-sm font-medium">断开后自动重连</span>
                  <p class="text-xs text-muted-foreground">连接断开后自动尝试重新连接</p>
                </div>
                <input type="checkbox" id="settingAutoReconnect" class="w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary cursor-pointer">
              </label>
              <div class="flex items-center justify-between">
                <div>
                  <span class="text-sm font-medium">重连间隔</span>
                  <p class="text-xs text-muted-foreground">自动重连的时间间隔</p>
                </div>
                <select id="settingReconnectInterval" class="px-3 py-1.5 bg-background border rounded-md text-sm">
                  <option value="3">3 秒</option>
                  <option value="5">5 秒</option>
                  <option value="10">10 秒</option>
                  <option value="30">30 秒</option>
                  <option value="60">60 秒</option>
                </select>
              </div>
            </div>
          </div>
          
          <!-- 日志设置 -->
          <div class="bg-card rounded-lg border shadow-sm p-6">
            <h2 class="text-base font-semibold mb-4 flex items-center gap-2">
              <i data-lucide="file-text" class="w-5 h-5 text-muted-foreground"></i>
              日志设置
            </h2>
            <div class="flex items-center justify-between">
              <div>
                <span class="text-sm font-medium">日志级别</span>
                <p class="text-xs text-muted-foreground">显示的最低日志级别</p>
              </div>
              <select id="settingLogLevel" class="px-3 py-1.5 bg-background border rounded-md text-sm">
                <option value="DEBUG">DEBUG</option>
                <option value="INFO">INFO</option>
                <option value="WARN">WARN</option>
                <option value="ERROR">ERROR</option>
              </select>
            </div>
          </div>
          
          <!-- 界面设置 -->
          <div class="bg-card rounded-lg border shadow-sm p-6">
            <h2 class="text-base font-semibold mb-4 flex items-center gap-2">
              <i data-lucide="monitor" class="w-5 h-5 text-muted-foreground"></i>
              界面设置
            </h2>
            <div class="space-y-4">
              <label class="flex items-center justify-between cursor-pointer">
                <div>
                  <span class="text-sm font-medium">关闭时最小化到托盘</span>
                  <p class="text-xs text-muted-foreground">点击关闭按钮时隐藏到系统托盘</p>
                </div>
                <input type="checkbox" id="settingMinimizeToTray" class="w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary cursor-pointer">
              </label>
              <label class="flex items-center justify-between cursor-pointer">
                <div>
                  <span class="text-sm font-medium">启动时最小化</span>
                  <p class="text-xs text-muted-foreground">应用启动后自动隐藏窗口</p>
                </div>
                <input type="checkbox" id="settingStartMinimized" class="w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary cursor-pointer">
              </label>
            </div>
          </div>
          
          <!-- 保存提示 -->
          <div id="settingsSaved" class="hidden bg-emerald-50 border border-emerald-200 text-emerald-700 px-4 py-3 rounded-md text-sm text-center">
            <i data-lucide="check-circle" class="w-4 h-4 inline mr-1"></i>
            设置已保存
          </div>
          
        </div>
      </div>
      
      <!-- Logs Tab -->
      <div id="tab-logs" class="tab-content hidden">
        <div class="bg-card rounded-lg border shadow-sm">
          <div class="px-4 py-3 border-b flex items-center justify-between">
            <h2 class="text-sm font-semibold flex items-center gap-2">
              <i data-lucide="scroll-text" class="w-4 h-4 text-muted-foreground"></i>
              运行日志
            </h2>
            <button id="refreshLogsBtn" class="text-sm text-muted-foreground hover:text-foreground transition-colors flex items-center gap-1">
              <i data-lucide="refresh-cw" class="w-4 h-4"></i>
              刷新
            </button>
          </div>
          <div id="logContainer" class="p-2 h-96 overflow-auto font-mono text-xs bg-muted/30">
            <div id="emptyLogs" class="p-8 text-center text-muted-foreground">暂无日志</div>
            <div id="logList"></div>
          </div>
        </div>
      </div>
      
      <!-- Debug Tab -->
      <div id="tab-debug" class="tab-content hidden">
        <div class="space-y-4">
          <!-- 调试信息头部 -->
          <div class="bg-card rounded-lg border shadow-sm p-4">
            <div class="flex items-center justify-between mb-3">
              <h2 class="text-sm font-semibold flex items-center gap-2">
                <i data-lucide="bug" class="w-4 h-4 text-muted-foreground"></i>
                图像匹配调试
              </h2>
              <div id="debugStatus" class="flex items-center gap-2 text-xs">
                <span class="w-2 h-2 bg-gray-400 rounded-full"></span>
                <span class="text-muted-foreground">等待任务</span>
              </div>
            </div>
            <!-- 匹配信息 -->
            <div id="debugInfo" class="text-xs space-y-1 text-muted-foreground">
              <div>任务 ID: <span id="debugTaskId" class="font-mono">-</span></div>
              <div>操作类型: <span id="debugActionType">-</span></div>
              <div>匹配结果: <span id="debugMatchResult">-</span></div>
              <div>匹配度: <span id="debugConfidence">-</span></div>
              <div>位置: <span id="debugPosition">-</span></div>
              <div>耗时: <span id="debugDuration">-</span></div>
            </div>
          </div>
          
          <!-- 图片对比区域 -->
          <div class="grid grid-cols-2 gap-4">
            <!-- 目标图片 -->
            <div class="bg-card rounded-lg border shadow-sm overflow-hidden">
              <div class="px-3 py-2 border-b bg-muted/30">
                <h3 class="text-xs font-medium">目标图片 (Template)</h3>
              </div>
              <div id="debugTemplateContainer" class="p-2 min-h-[200px] flex items-center justify-center bg-muted/10">
                <div id="debugTemplateEmpty" class="text-xs text-muted-foreground">暂无目标图片</div>
                <img id="debugTemplateImg" class="hidden max-w-full max-h-[300px] object-contain rounded" alt="目标图片">
              </div>
            </div>
            
            <!-- 截图图片 -->
            <div class="bg-card rounded-lg border shadow-sm overflow-hidden">
              <div class="px-3 py-2 border-b bg-muted/30">
                <h3 class="text-xs font-medium">屏幕截图 (Screenshot)</h3>
              </div>
              <div id="debugScreenshotContainer" class="p-2 min-h-[200px] flex items-center justify-center bg-muted/10 relative">
                <div id="debugScreenshotEmpty" class="text-xs text-muted-foreground">暂无截图</div>
                <img id="debugScreenshotImg" class="hidden max-w-full max-h-[300px] object-contain rounded" alt="屏幕截图">
                <!-- 匹配位置标记 -->
                <div id="debugMatchMarker" class="hidden absolute border-2 border-green-500 bg-green-500/20 pointer-events-none"></div>
              </div>
            </div>
          </div>
          
          <!-- 历史记录 -->
          <div class="bg-card rounded-lg border shadow-sm">
            <div class="px-3 py-2 border-b flex items-center justify-between">
              <h3 class="text-xs font-medium">匹配历史</h3>
              <button id="clearDebugHistoryBtn" class="text-xs text-muted-foreground hover:text-foreground">清空</button>
            </div>
            <div id="debugHistoryList" class="max-h-[150px] overflow-auto">
              <div id="debugHistoryEmpty" class="p-4 text-xs text-muted-foreground text-center">暂无历史记录</div>
            </div>
          </div>
        </div>
      </div>
      
    </main>
    
    <!-- Footer -->
    <footer class="border-t px-4 py-2 flex items-center justify-between text-xs text-muted-foreground bg-card">
      <span id="systemInfo">-</span>
      <span id="currentTime"></span>
    </footer>
    
  </div>
  
  <script src="app.js"></script>
</body>
</html>
